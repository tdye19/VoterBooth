package VoterBooth;

import java.util.Random;
/**
 * @author Roger Ferguson
 */
public class VoterProducer implements ClockListener {

	private int nextPerson = 0;
	private int numOfTicksNextPerson;
	private int averageBoothTime;
	private TableMZ tablemz;
	private Random r = new Random();
	private TableAL tableal;
	private Booth booth;
	


	public VoterProducer( TableAL tableal, TableMZ tablemz,Booth booth,
			int numOfTicksNextPerson, int averageBoothTime){
		
		this.booth = booth;
		this.tableal = tableal;
		this.tablemz = tablemz;
		this.numOfTicksNextPerson = numOfTicksNextPerson;
		this.averageBoothTime = averageBoothTime;
		//r.setSeed(13);    // This will cause the same random numbers
	}



	public void event(int tick) {
		if (nextPerson <= tick) {
			nextPerson = tick + numOfTicksNextPerson;
			
			
			
			Voter person = new Voter();
			
			

			int rNumber = (int)(Math.random() * 100);

			if((rNumber*100) < 50){
				tableal.add(person);
			}
			else {
				tablemz.add(person);
			}

			person.setBoothTime(averageBoothTime*0.5*r.nextGaussian() + averageBoothTime +.5);
			person.setTickTime(tick);
			tableal.add(person);
			tablemz.add(person);
			booth.add(person);

			//person.setDestination(theLocationAfterTheBooth);  // You can save off where the voter should go.
		}
	}


}
